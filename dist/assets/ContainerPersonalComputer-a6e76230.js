import{D as P,Q as C,r as c,_ as d,j as l,H as i,L as u,X as S,Y as x,$ as y,I as j,R as O,N as _,S as q,T as E,U as L,V as k,W as b,Z as R}from"./index-371e0479.js";import{C as w}from"./Card-3edec102.js";import{u as A}from"./useQuery-85112495.js";import{u as g,b as f}from"./useToast-7daec343.js";import{g as T,u as M}from"./personal-computer-service-6fe0350c.js";import{M as U}from"./Modal-05a5b31d.js";const V=p=>{const{setLoading:e}=P(),{errorToast:a}=g();return A({queryKey:["personal-computer",{search:p}],queryFn:()=>T(p),onError:async n=>{a(n),e(!1)},onSettled:async()=>{e(!1)},refetchOnWindowFocus:!1,retry:!1})},F=()=>{const p=C(),{setLoading:e}=P(),{successToast:a,errorToast:n}=g();return f({mutationFn:t=>M(t),onMutate:()=>{e(!0)},onError:async t=>{e(!1),n(t)},onSuccess:async t=>{a(t),p.invalidateQueries({queryKey:["personal-computer"]})},onSettled:()=>{e(!1)}})},Q=c.lazy(()=>d(()=>import("./SelectDepartment-eff00497.js"),["assets/SelectDepartment-eff00497.js","assets/index-371e0479.js","assets/index-aeb37fef.css","assets/useQuery-85112495.js","assets/useToast-7daec343.js","assets/department-service-ba2cf26f.js"])),z=c.lazy(()=>d(()=>import("./SelectLocationByDepartment-f4ed8f79.js"),["assets/SelectLocationByDepartment-f4ed8f79.js","assets/index-371e0479.js","assets/index-aeb37fef.css","assets/useQuery-85112495.js","assets/useToast-7daec343.js","assets/location-service-7556d11c.js"])),B=({isOpen:p,data:e,onDidDismiss:a})=>{const[n,t]=c.useState({}),{mutate:m}=F(),r=(s,o)=>{t(N=>({...N,[s]:o}))},h=s=>{t(o=>({...o,DepartmentId:s,LocationId:""}))},I=s=>{s.preventDefault(),m(n),a()},v=s=>{t(s==="Dispose"?o=>({...o,status:s,inActive:!0}):o=>({...o,status:s,inActive:e==null?void 0:e.inActive}))};return c.useEffect(()=>{t(s=>({...s,id:e==null?void 0:e.id,assetNo:e==null?void 0:e.assetNo,invoiceNo:e==null?void 0:e.invoiceNo,ownerName:e==null?void 0:e.ownerName,previousOwner:e==null?void 0:e.previousOwner,detailName:e==null?void 0:e.detailName,name:e==null?void 0:e.name,username:e==null?void 0:e.username,domain:e==null?void 0:e.domain,purchaseDate:e==null?void 0:e.purchaseDate,expireDate:e==null?void 0:e.expireDate,status:e==null?void 0:e.status,remark:e==null?void 0:e.remark,inActive:e==null?void 0:e.inActive,DepartmentId:e==null?void 0:e.DepartmentId,LocationId:e==null?void 0:e.LocationId}))},[e]),l.jsx(U,{title:"Update Personal Computer",isOpen:p,onDidDismiss:a,children:l.jsxs("form",{onSubmit:I,children:[l.jsx(i,{children:l.jsx(u,{label:"Id",labelPlacement:"floating",value:n==null?void 0:n.id,onIonInput:s=>r("id",s.detail.value),required:!0,disabled:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Asset No",labelPlacement:"floating",value:n==null?void 0:n.assetNo,onIonInput:s=>r("assetNo",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Invoice No",labelPlacement:"floating",value:n==null?void 0:n.invoiceNo,onIonInput:s=>r("invoiceNo",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Owner Name",labelPlacement:"floating",value:n==null?void 0:n.ownerName,onIonInput:s=>r("ownerName",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Previous Owner Name",labelPlacement:"floating",value:n==null?void 0:n.previousOwner,onIonInput:s=>r("previousOwner",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Detail Name",labelPlacement:"floating",value:n==null?void 0:n.detailName,onIonInput:s=>r("detailName",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Computer Name",labelPlacement:"floating",value:n==null?void 0:n.name,onIonInput:s=>r("name",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Username",labelPlacement:"floating",value:n==null?void 0:n.username,onIonInput:s=>r("username",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{label:"Domain",labelPlacement:"floating",value:n==null?void 0:n.domain,onIonInput:s=>r("domain",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{type:"date",label:"Purchase Date",labelPlacement:"floating",value:n==null?void 0:n.purchaseDate,onIonInput:s=>r("purchaseDate",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsx(u,{type:"date",label:"Expire Date",labelPlacement:"floating",value:n==null?void 0:n.expireDate,onIonInput:s=>r("expireDate",s.detail.value),required:!0})}),l.jsx(i,{children:l.jsxs(S,{label:"Status",labelPlacement:"floating",value:n==null?void 0:n.status,onIonChange:s=>v(s.detail.value),children:[l.jsx(x,{value:"Operational",children:"Operational"}),l.jsx(x,{value:"Not Operating",children:"Not Operating"}),l.jsx(x,{value:"Repair",children:"Repair"}),l.jsx(x,{value:"Dispose",children:"Dispose"})]})}),l.jsx(i,{children:l.jsx(y,{label:"Remark",labelPlacement:"floating",value:n==null?void 0:n.remark,onIonInput:s=>r("remark",s.detail.value)})}),l.jsxs(c.Suspense,{fallback:l.jsx(j,{name:"crescent"}),children:[l.jsx(Q,{value:n==null?void 0:n.DepartmentId,onChange:s=>h(s)}),(n==null?void 0:n.DepartmentId)&&l.jsx(z,{value:n.LocationId,departmentId:n.DepartmentId,onChange:s=>r("LocationId",s)})]}),l.jsx(i,{children:l.jsx(O,{checked:n==null?void 0:n.inActive,onIonChange:s=>r("inActive",s.detail.checked),children:"InActive"})}),l.jsx(_,{type:"submit",expand:"block",children:"Submit"})]})})},K=c.lazy(()=>d(()=>import("./TablePersonalComputer-d54ff299.js"),["assets/TablePersonalComputer-d54ff299.js","assets/index-371e0479.js","assets/index-aeb37fef.css","assets/Table-eb48f3b9.js","assets/Card-3edec102.js"])),$=()=>{const[p,e]=c.useState(""),{data:a,isLoading:n,refetch:t}=V(p),[m,r]=c.useState(),[h,I]=c.useState(!1),v=o=>{r(o),I(!0)},s=async o=>{t(),o.detail.complete()};return l.jsxs(l.Fragment,{children:[l.jsx(q,{slot:"fixed",onIonRefresh:s,children:l.jsx(E,{})}),l.jsx(L,{children:l.jsxs(k,{children:[l.jsx(b,{size:"12",children:l.jsx(R,{value:p,onIonInput:o=>e(o.detail.value),debounce:1e3})}),l.jsx(b,{children:l.jsx(w,{title:"Data Personal Computer",children:n?l.jsx(j,{name:"crescent"}):l.jsx(c.Suspense,{fallback:l.jsx(j,{name:"crescent"}),children:l.jsx(K,{data:a,handleClickBtnEdit:o=>v(o)})})})})]})}),l.jsx(B,{isOpen:h,data:m,onDidDismiss:()=>I(!1)})]})};export{$ as default};
