System.register(["./index-legacy-7e6fb237.js","./Table-legacy-272b7760.js","./date-fns-legacy-e5d7c49a.js","./Card-legacy-3e7c8f1d.js","./useQuery-legacy-d96a72de.js","./useToast-legacy-423e2167.js","./location-service-legacy-08d510d8.js","./Modal-legacy-c2854f43.js"],(function(e,t){"use strict";var n,a,l,i,s,o,r,d,c,u,m,p,x,j,v,b,h,y,I,g,f,D,S,A,L,q;return{setters:[e=>{n=e.D,a=e.Q,l=e.r,i=e.j,s=e.H,o=e.L,r=e.R,d=e.N,c=e._,u=e.S,m=e.T,p=e.U,x=e.V,j=e.W,v=e.I,b=e.aj},e=>{h=e.T},e=>{y=e.f},e=>{I=e.C},e=>{g=e.u},e=>{f=e.u,D=e.b},e=>{S=e.g,A=e.u,L=e.c},e=>{q=e.M}],execute:function(){const C=({isOpen:e,data:t,onDidDismiss:c})=>{const[u,m]=l.useState({}),{mutate:p}=(e=>{const t=a(),{setLoading:l}=n(),{successToast:i,errorToast:s}=f();return D({mutationFn:e=>A(e),onMutate:()=>{l(!0)},onError:async e=>{l(!1),s(e)},onSuccess:async n=>{i(n),t.invalidateQueries({queryKey:["locations",{departmentId:e}]})},onSettled:()=>{l(!1)}})})(u.DepartmentId||""),x=(e,t)=>{m((n=>({...n,[e]:t})))};return l.useEffect((()=>{m((e=>({...e,id:null==t?void 0:t.id,name:null==t?void 0:t.name,lot:null==t?void 0:t.lot,inActive:null==t?void 0:t.inActive,DepartmentId:null==t?void 0:t.DepartmentId})))}),[t]),i.jsx(q,{title:"Update Location",isOpen:e,onDidDismiss:c,children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),p(u),c()},children:[i.jsx(s,{children:i.jsx(o,{type:"text",label:"Id",labelPlacement:"floating",value:null==u?void 0:u.id,onIonInput:e=>x("id",e.detail.value),required:!0,disabled:!0})}),i.jsx(s,{children:i.jsx(o,{type:"text",label:"Department Id",labelPlacement:"floating",value:null==u?void 0:u.DepartmentId,onIonInput:e=>x("DepartmentId",e.detail.value),required:!0,disabled:!0})}),i.jsx(s,{children:i.jsx(o,{type:"text",label:"Name",labelPlacement:"floating",value:null==u?void 0:u.name,onIonInput:e=>x("name",e.detail.value),required:!0})}),i.jsx(s,{children:i.jsx(o,{type:"text",label:"Lot",labelPlacement:"floating",value:null==u?void 0:u.lot,onIonInput:e=>x("lot",e.detail.value),required:!0})}),i.jsx(s,{children:i.jsx(r,{checked:null==u?void 0:u.inActive,onIonChange:e=>x("inActive",e.detail.checked),children:"InActive"})}),i.jsx(d,{type:"submit",expand:"block",children:"Submit"})]})})},T=({isOpen:e,departmentId:t,onDidDismiss:r})=>{const[c,u]=l.useState({name:"",lot:"",DepartmentId:t}),{mutate:m}=(e=>{const t=a(),{setLoading:l}=n(),{successToast:i,errorToast:s}=f();return D({mutationFn:e=>L(e),onMutate:()=>{l(!0)},onError:async e=>{l(!1),s(e)},onSuccess:async n=>{i(n),t.invalidateQueries({queryKey:["locations",{departmentId:e}]})},onSettled:()=>{l(!1)}})})(t),p=(e,t)=>{u((n=>({...n,[e]:t})))};return i.jsx(q,{title:"Create Location",isOpen:e,onDidDismiss:r,children:i.jsxs("form",{onSubmit:e=>{e.preventDefault(),m(c),u((e=>({...e,name:""}))),r()},children:[i.jsx(s,{children:i.jsx(o,{type:"text",label:"Department Id",labelPlacement:"floating",value:c.DepartmentId,onIonInput:e=>p("DepartmentId",e.detail.value),disabled:!0,required:!0})}),i.jsx(s,{children:i.jsx(o,{type:"text",label:"Name",labelPlacement:"floating",value:c.name,onIonInput:e=>p("name",e.detail.value),required:!0})}),i.jsx(s,{children:i.jsx(o,{type:"text",label:"Lot",labelPlacement:"floating",value:c.lot,onIonInput:e=>p("lot",e.detail.value),required:!0})}),i.jsx(d,{type:"submit",expand:"block",children:"Submit"})]})})},k=l.lazy((()=>c((()=>t.import("./TableLocation-legacy-b6bd4412.js")),void 0))),O=({data:e})=>{const{data:t,isLoading:a,refetch:s}=(e=>{const{setLoading:t}=n(),{errorToast:a}=f();return g({queryKey:["locations",{departmentId:e}],queryFn:()=>S(e),onError:async e=>{a(e),t(!1)},onSettled:async()=>{t(!1)},refetchOnWindowFocus:!1,retry:!1})})(e.id),[o,r]=l.useState(),[c,b]=l.useState(!1),[h,y]=l.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsx(u,{slot:"fixed",onIonRefresh:async e=>{s(),e.detail.complete()},children:i.jsx(m,{})}),i.jsx(p,{children:i.jsxs(x,{children:[i.jsx(j,{size:"12",children:i.jsx(d,{fill:"clear",onClick:()=>b(!0),className:"float-right",children:"Create Location"})}),i.jsx(j,{children:i.jsx(I,{title:`Data Location ${e.name}`,headerColor:"light",children:a?i.jsx(v,{name:"crescent"}):i.jsx(l.Suspense,{fallback:i.jsx(v,{name:"crescent"}),children:i.jsx(k,{data:t,handleClickBtnEdit:e=>(e=>{r(e),y(!0)})(e)})})})})]})}),i.jsx(T,{departmentId:e.id,isOpen:c,onDidDismiss:()=>b(!1)}),i.jsx(C,{data:o,isOpen:h,onDidDismiss:()=>y(!1)})]})};e("default",(({data:e=[],handleClickBtnEdit:t})=>{const n=l.useMemo((()=>[{name:"Name",selector:e=>e.name,sortable:!0,grow:2,wrap:!0},{name:"Abbreviation",selector:e=>e.abbreviation,sortable:!0,wrap:!0},{name:"Status",cell:e=>i.jsx(b,{color:e.inActive?"danger":"success",children:e.inActive?"InActive":"Active"}),sortable:!0},{name:"Update By",selector:e=>e.updatedBy,sortable:!0},{name:"Update At",selector:e=>y(e.updatedAt),sortable:!0,wrap:!0},{name:"Edit",cell:e=>i.jsx(d,{fill:"clear",color:"warning",onClick:()=>{t(e)},children:"Edit"}),center:!0}]),[t]);return i.jsx(h,{columns:n,data:e,responsive:!0,pagination:!0,striped:!0,highlightOnHover:!0,expandableRows:!0,expandableRowsComponent:O})}))}}}));
