import{D as m,Q as I,r as c,j as e,H as p,L as x,R as j,N as g,_ as C,S as b,T as S,U as v,V as E,W as R,I as h}from"./index-2e6015fe.js";import{C as _}from"./Card-89e3a3b1.js";import{u as k}from"./useQuery-126fcc4d.js";import{u as y,b as M}from"./useToast-38e41910.js";import{g as T,u as q}from"./category-service-8ea230ad.js";import{M as A}from"./Modal-e69a7e9c.js";const L=()=>{const{setLoading:r}=m(),{errorToast:t}=y();return k({queryKey:["categories"],queryFn:()=>T(),onError:async a=>{t(a),r(!1)},onSettled:async()=>{r(!1)},refetchOnWindowFocus:!1,retry:!1})},U=()=>{const r=I(),{setLoading:t}=m(),{successToast:a,errorToast:s}=y();return M({mutationFn:o=>q(o),onMutate:()=>{t(!0)},onError:async o=>{t(!1),s(o)},onSuccess:async o=>{a(o),r.invalidateQueries({queryKey:["categories"]})},onSettled:()=>{t(!1)}})},F=({isOpen:r,data:t,onDidDismiss:a})=>{const[s,o]=c.useState({}),{mutate:u}=U(),l=(n,i)=>{o(f=>({...f,[n]:i}))},d=n=>{n.preventDefault(),u(s),a()};return c.useEffect(()=>{o(n=>({...n,id:t==null?void 0:t.id,name:t==null?void 0:t.name,inActive:t==null?void 0:t.inActive}))},[t]),e.jsx(A,{title:"Update Category",isOpen:r,onDidDismiss:a,children:e.jsxs("form",{onSubmit:d,children:[e.jsx(p,{children:e.jsx(x,{type:"text",label:"Id",labelPlacement:"floating",value:s==null?void 0:s.id,onIonInput:n=>l("id",n.detail.value),required:!0,disabled:!0})}),e.jsx(p,{children:e.jsx(x,{type:"text",label:"Name",labelPlacement:"floating",value:s==null?void 0:s.name,onIonInput:n=>l("name",n.detail.value),required:!0})}),e.jsx(p,{children:e.jsx(j,{checked:s==null?void 0:s.inActive,onIonChange:n=>l("inActive",n.detail.checked),children:"InActive"})}),e.jsx(g,{type:"submit",expand:"block",children:"Submit"})]})})},O=c.lazy(()=>C(()=>import("./TableCategory-89fd08e5.js"),["assets/TableCategory-89fd08e5.js","assets/index-2e6015fe.js","assets/index-30953d8c.css","assets/Table-31cc959a.js","assets/date-fns-2338d0ca.js","assets/Card-89e3a3b1.js","assets/useQuery-126fcc4d.js","assets/useToast-38e41910.js","assets/Modal-e69a7e9c.js"])),N=()=>{const{data:r,isLoading:t,refetch:a}=L(),[s,o]=c.useState(),[u,l]=c.useState(!1),d=i=>{o(i),l(!0)},n=async i=>{a(),i.detail.complete()};return e.jsxs(e.Fragment,{children:[e.jsx(b,{slot:"fixed",onIonRefresh:n,children:e.jsx(S,{})}),e.jsx(v,{children:e.jsx(E,{children:e.jsx(R,{children:e.jsx(_,{title:"Data Category",children:t?e.jsx(h,{name:"crescent"}):e.jsx(c.Suspense,{fallback:e.jsx(h,{name:"crescent"}),children:e.jsx(O,{data:r,handleClickBtnEdit:i=>d(i)})})})})})}),e.jsx(F,{data:s,isOpen:u,onDidDismiss:()=>l(!1)})]})};export{N as default};
