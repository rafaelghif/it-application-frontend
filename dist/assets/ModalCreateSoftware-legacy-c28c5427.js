System.register(["./index-legacy-4a49ef7b.js","./Modal-legacy-cc912185.js","./useToast-legacy-d54321d9.js","./software-service-legacy-14bbe1a1.js","./date-fns-legacy-e5d7c49a.js"],(function(e,t){"use strict";var a,n,r,l,s,i,u,o,c,d,p,x,v,m,j;return{setters:[e=>{a=e.Q,n=e.D,r=e.r,l=e.j,s=e.H,i=e.L,u=e.X,o=e.Y,c=e.$,d=e.N},e=>{p=e.M},e=>{x=e.u,v=e.b},e=>{m=e.c},e=>{j=e.a}],execute:function(){e("default",(({isOpen:e,onDidDismiss:t})=>{const[y,b]=r.useState({name:"",version:"",licenseType:"Subscription",startDate:"",expireDate:"",remark:""}),{mutate:D}=(()=>{const e=a(),{setLoading:t}=n(),{successToast:r,errorToast:l}=x();return v({mutationFn:e=>m(e),onMutate:()=>{t(!0)},onError:async e=>{t(!1),l(e)},onSuccess:async t=>{r(t),e.invalidateQueries({queryKey:["softwares"]})},onSettled:()=>{t(!1)}})})(),f=(e,t)=>{b((a=>({...a,[e]:t})))};return l.jsx(p,{title:"Create Software",isOpen:e,onDidDismiss:t,children:l.jsxs("form",{onSubmit:e=>{e.preventDefault(),D(y),b({name:"",version:"",licenseType:"Subscription",startDate:"",expireDate:"",remark:""}),t()},children:[l.jsx(s,{children:l.jsx(i,{type:"text",label:"Name",labelPlacement:"floating",value:y.name,onIonInput:e=>f("name",e.detail.value),required:!0})}),l.jsx(s,{children:l.jsx(i,{type:"text",label:"Version",labelPlacement:"floating",value:y.version,onIonInput:e=>f("version",e.detail.value),required:!0})}),l.jsx(s,{children:l.jsxs(u,{label:"License Type",labelPlacement:"floating",value:y.licenseType,onIonChange:e=>{return t=e.detail.value,void b((e=>({...e,licenseType:t,startDate:"",expireDate:""})));var t},children:[l.jsx(o,{value:"Subscription",children:"Subscription"}),l.jsx(o,{value:"Perpetual",children:"Perpetual"})]})}),l.jsx(s,{children:l.jsx(i,{type:"date",label:"Start Date / Purchase Date",labelPlacement:"floating",value:y.startDate,onIonInput:e=>{return t=e.detail.value,void("Subscription"===y.licenseType?b((e=>({...e,startDate:t,expireDate:j(t,1)}))):b((e=>({...e,startDate:t}))));var t},required:!0})}),l.jsx(s,{hidden:"Perpetual"===y.licenseType,children:l.jsx(i,{type:"date",label:"Expire Date",labelPlacement:"floating",value:y.expireDate,onIonInput:e=>f("expireDate",e.detail.value)})}),l.jsx(s,{children:l.jsx(c,{label:"Remark",labelPlacement:"floating",value:y.remark,onIonInput:e=>f("remark",e.detail.value),required:!0})}),l.jsx(d,{type:"submit",expand:"block",children:"Submit"})]})})}))}}}));
