import{D as m,Q as y,r as c,_ as j,j as e,H as a,L as d,X as f,Y as I,I as h,R as g,N as S,S as U,T as C,U as _,V as E,W as P}from"./index-2e6015fe.js";import{C as R}from"./Card-89e3a3b1.js";import{u as k}from"./useQuery-126fcc4d.js";import{u as b,b as A}from"./useToast-38e41910.js";import{g as q,u as w}from"./user-service-eb892458.js";import{M as T}from"./Modal-e69a7e9c.js";const L=()=>{const{setLoading:o}=m(),{errorToast:s}=b();return k({queryKey:["users"],queryFn:()=>q(),onError:async i=>{s(i),o(!1)},onSettled:async()=>{o(!1)},refetchOnWindowFocus:!1,retry:!1})},M=()=>{const o=y(),{setLoading:s}=m(),{successToast:i,errorToast:n}=b();return A({mutationFn:t=>w(t),onMutate:()=>{s(!0)},onError:async t=>{s(!1),n(t)},onSuccess:async t=>{i(t),o.invalidateQueries({queryKey:["users"]})},onSettled:()=>{s(!1)}})},O=c.lazy(()=>j(()=>import("./SelectDepartment-5601e28f.js"),["assets/SelectDepartment-5601e28f.js","assets/index-2e6015fe.js","assets/index-30953d8c.css","assets/useQuery-126fcc4d.js","assets/useToast-38e41910.js","assets/department-service-cd71fa07.js"])),B=({isOpen:o,data:s,onDidDismiss:i})=>{const[n,t]=c.useState({}),{mutate:p}=M(),r=(l,u)=>{t(v=>({...v,[l]:u}))},x=l=>{l.preventDefault(),p(n),i()};return c.useEffect(()=>{t(l=>({...l,id:s==null?void 0:s.id,badgeId:s==null?void 0:s.badgeId,password:s==null?void 0:s.password,email:s==null?void 0:s.email,name:s==null?void 0:s.name,role:s==null?void 0:s.role,inActive:s==null?void 0:s.inActive,DepartmentId:s==null?void 0:s.DepartmentId}))},[s]),e.jsx(T,{title:"Update User",isOpen:o,onDidDismiss:i,children:e.jsxs("form",{onSubmit:x,children:[e.jsx(a,{children:e.jsx(d,{type:"text",label:"Id",labelPlacement:"floating",value:n==null?void 0:n.id,onIonInput:l=>r("id",l.detail.value),disabled:!0,required:!0})}),e.jsx(a,{children:e.jsx(d,{type:"text",label:"Badge Id",labelPlacement:"floating",value:n==null?void 0:n.badgeId,onIonInput:l=>r("badgeId",l.detail.value),required:!0})}),e.jsx(a,{children:e.jsx(d,{type:"password",label:"Password",labelPlacement:"floating",value:n==null?void 0:n.password,onIonInput:l=>r("password",l.detail.value),required:!0})}),e.jsx(a,{children:e.jsx(d,{type:"email",label:"Email",labelPlacement:"floating",value:n.email,onIonInput:l=>r("email",l.detail.value)})}),e.jsx(a,{children:e.jsx(d,{type:"text",label:"Name",labelPlacement:"floating",value:n==null?void 0:n.name,onIonInput:l=>r("name",l.detail.value),required:!0})}),e.jsx(a,{children:e.jsxs(f,{value:n==null?void 0:n.role,onIonChange:l=>r("role",l.detail.value),label:"Role",labelPlacement:"stacked",children:[e.jsx(I,{value:"Basic",children:"Basic"}),e.jsx(I,{value:"Admin",children:"Admin"}),e.jsx(I,{value:"Super User",children:"Super User"})]})}),e.jsx(c.Suspense,{fallback:e.jsx(h,{name:"crescent"}),children:e.jsx(O,{value:n==null?void 0:n.DepartmentId,onChange:l=>r("DepartmentId",l)})}),e.jsx(a,{children:e.jsx(g,{checked:n==null?void 0:n.inActive,onIonChange:l=>r("inActive",l.detail.checked),children:"InActive"})}),e.jsx(S,{type:"submit",expand:"block",children:"Submit"})]})})},F=c.lazy(()=>j(()=>import("./TableUser-669bb016.js"),["assets/TableUser-669bb016.js","assets/index-2e6015fe.js","assets/index-30953d8c.css","assets/Table-31cc959a.js","assets/date-fns-2338d0ca.js"])),G=()=>{const{data:o,isLoading:s,refetch:i}=L(),[n,t]=c.useState(),[p,r]=c.useState(!1),x=u=>{t(u),r(!0)},l=async u=>{i(),u.detail.complete()};return e.jsxs(e.Fragment,{children:[e.jsx(U,{slot:"fixed",onIonRefresh:l,children:e.jsx(C,{})}),e.jsx(_,{children:e.jsx(E,{children:e.jsx(P,{children:e.jsx(R,{title:"Data User",children:s?e.jsx(h,{name:"crescent"}):e.jsx(c.Suspense,{fallback:e.jsx(h,{name:"crescent"}),children:e.jsx(F,{data:o,handleClickBtnEdit:u=>x(u)})})})})})}),e.jsx(B,{data:n,isOpen:p,onDidDismiss:()=>r(!1)})]})};export{G as default};
