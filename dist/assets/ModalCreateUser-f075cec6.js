import{Q as x,D as b,r as c,_ as j,j as e,H as r,L as u,X as v,Y as d,I as h,N as f}from"./index-2e6015fe.js";import{M as S}from"./Modal-e69a7e9c.js";import{u as g,b as y}from"./useToast-38e41910.js";import{c as D}from"./user-service-eb892458.js";const P=()=>{const i=x(),{setLoading:n}=b(),{successToast:t,errorToast:o}=g();return y({mutationFn:s=>D(s),onMutate:()=>{n(!0)},onError:async s=>{n(!1),o(s)},onSuccess:async s=>{t(s),i.invalidateQueries({queryKey:["users"]})},onSettled:()=>{n(!1)}})},_=c.lazy(()=>j(()=>import("./SelectDepartment-5601e28f.js"),["assets/SelectDepartment-5601e28f.js","assets/index-2e6015fe.js","assets/index-30953d8c.css","assets/useQuery-126fcc4d.js","assets/useToast-38e41910.js","assets/department-service-cd71fa07.js"])),U=({isOpen:i,onDidDismiss:n})=>{const[t,o]=c.useState({badgeId:"",password:"",email:"",name:"",role:"Basic",DepartmentId:""}),{mutate:s}=P(),l=(a,p)=>{o(I=>({...I,[a]:p}))},m=a=>{a.preventDefault(),s(t),o({badgeId:"",password:"",email:"",name:"",role:"Basic",DepartmentId:""}),n()};return e.jsx(S,{title:"Create User",isOpen:i,onDidDismiss:n,children:e.jsxs("form",{onSubmit:m,children:[e.jsx(r,{children:e.jsx(u,{type:"text",label:"Badge Id",labelPlacement:"floating",value:t.badgeId,onIonInput:a=>l("badgeId",a.detail.value),required:!0})}),e.jsx(r,{children:e.jsx(u,{type:"password",label:"Password",labelPlacement:"floating",value:t.password,onIonInput:a=>l("password",a.detail.value),required:!0})}),e.jsx(r,{children:e.jsx(u,{type:"email",label:"Email",labelPlacement:"floating",value:t.email,onIonInput:a=>l("email",a.detail.value)})}),e.jsx(r,{children:e.jsx(u,{type:"text",label:"Name",labelPlacement:"floating",value:t.name,onIonInput:a=>l("name",a.detail.value),required:!0})}),e.jsx(r,{children:e.jsxs(v,{value:t.role,onIonChange:a=>l("role",a.detail.value),label:"Role",labelPlacement:"stacked",children:[e.jsx(d,{value:"Basic",children:"Basic"}),e.jsx(d,{value:"Admin",children:"Admin"}),e.jsx(d,{value:"Super User",children:"Super User"})]})}),e.jsx(c.Suspense,{fallback:e.jsx(h,{name:"crescent"}),children:e.jsx(_,{value:t.DepartmentId,onChange:a=>l("DepartmentId",a)})}),e.jsx(f,{type:"submit",expand:"block",children:"Submit"})]})})};export{U as default};
